<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8" />
    <title>Aluga Aí - Dev</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/custom.css' %}" />
  </head>
  <body>
    <header class="site-header">
      <div class="container">
        <nav class="nav">
          <a href="{% url 'propriedades:lista' %}">Home</a>
          {% if user.is_authenticated %}
          <a href="{% url 'propriedades:nova' %}">Quero anunciar</a>
          <a href="{% url 'reservas:minhas' %}">Minhas reservas</a>
          <a href="{% url 'reservas:recebidas' %}">Solicitações</a>
          <span class="greeting">Olá, {{ user.first_name|default:user.username }}</span>
          <a href="{% url 'usuarios:perfil' user.id %}">Meu perfil</a>
          <a href="{% url 'mensagens:list' %}" class="messages-link">
            Mensagens {% if unread_messages_count and unread_messages_count > 0 %}
            <span class="badge">{{ unread_messages_count }}</span>
            {% endif %}
          </a>
          <form action="{% url 'usuarios:logout' %}" method="post" style="display: inline; margin: 0; padding: 0">
            {% csrf_token %}
            <button
              type="submit"
              style="background: none; border: none; padding: 0; margin: 0; color: inherit; cursor: pointer"
            >
              Sair
            </button>
          </form>
          {% else %}
          <a href="{% url 'usuarios:login' %}">Login</a>
          <a href="{% url 'usuarios:cadastro' %}">Cadastro</a>
          {% endif %}
        </nav>
      </div>
    </header>

    <div class="container">
      {% if messages %} {% for m in messages %}
      <div class="{% if m.tags %}{{ m.tags }}{% endif %} flash">{{ m }}</div>
      {% endfor %} {% endif %} {% block content %}{% endblock %}
    </div>
  </body>
</html>
